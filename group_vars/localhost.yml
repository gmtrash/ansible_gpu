---
# Configuration variables for Ansible deployment
# Edit these to match your preferences

# ============================================
# User Configuration
# ============================================
username: aubreybailey
home_dir: "/home/{{ username }}"
user_group: "{{ username }}"

# ============================================
# ROCm Configuration
# ============================================
rocm_version: "6.2"
rocm_use_latest: true  # Use latest 6.x version

# GPU architecture (gfx target)
# Leave empty to auto-detect, or set manually:
# - gfx1036: RDNA 3 (RX 7000 series, Ryzen 8000G APU)
# - gfx1030: RDNA 2 (RX 6000 series)
# - gfx906: Vega 20
gpu_architecture: "gfx1036"

# HSA override for newer GPUs (may be needed for RDNA 3+)
hsa_override_gfx: "10.3.0"

# ============================================
# Conda Configuration
# ============================================
conda_installer: "miniforge"  # or "miniconda"
conda_version: "latest"
conda_install_dir: "{{ home_dir }}/miniforge3"

# Auto-activate base environment on shell startup
conda_auto_activate_base: false

# ============================================
# SD Forge ROCm Configuration
# ============================================

# Repository settings
forge_repo_url: "https://github.com/lllyasviel/stable-diffusion-webui-forge"
forge_branch: "classic"
forge_install_dir: "{{ home_dir }}/llm/sd-webui-forge-classic"

# Conda environment
forge_conda_env: "forge-rocm"
forge_python_version: "3.11.9"

# Model directories
forge_models_dir: "{{ forge_install_dir }}/models"

# Optional: Use a shared model directory (symlink)
# Uncomment and set path to use shared models:
# shared_models_dir: "/mnt/data/ai-models"
# shared_models_types:
#   - Stable-diffusion
#   - Lora
#   - VAE
#   - ControlNet
#   - ESRGAN

# Launch script settings
forge_commandline_args: >-
  --cuda-malloc
  --pin-shared-memory
  --persistent-patches
  --cuda-stream
  --always-gpu
  --attention-pytorch
  --no-download-sd-model
  --listen

# Performance mode for different GPU types
# Options: "integrated", "dedicated-low", "dedicated-high"
forge_gpu_mode: "integrated"

# ============================================
# Base System Packages
# ============================================

# Development tools
install_build_tools: true
install_dev_packages: true

# Additional packages to install (customize as needed)
additional_apt_packages:
  - htop
  - vim
  - tmux
  - tree
  - ncdu
  - net-tools
  - wget
  - curl
  - git
  - build-essential
  - cmake
  - ninja-build
  - python3-dev
  - python3-pip
  - libssl-dev
  - libffi-dev
  - libjpeg-dev
  - libpng-dev
  - libwebp-dev

# ============================================
# Desktop Preferences
# ============================================

# Configure desktop environment preferences
configure_desktop: true

# Git configuration
git_user_name: "Aubrey Bailey"
git_user_email: "{{ username }}@example.com"  # Change this!

# Bash customizations
custom_bash_aliases:
  - alias ll='ls -alF'
  - alias la='ls -A'
  - alias l='ls -CF'
  - alias gpu='rocm-smi'
  - alias forge='cd {{ forge_install_dir }} && conda activate {{ forge_conda_env }}'
  - alias forge-launch='cd {{ forge_install_dir }} && ./webui-user-rocm.sh'

# Custom bash exports
custom_bash_exports:
  - export EDITOR=vim
  - export VISUAL=vim
  - export PYTORCH_HIP_ALLOC_CONF=expandable_segments:True

# ============================================
# Optional Features
# ============================================

# Create systemd service for Forge (auto-start)
create_forge_service: false

# Install additional AI/ML tools
install_jupyter: false
install_tensorboard: false

# Backup settings
create_backup_before_changes: true
backup_dir: "{{ home_dir }}/ansible-backups"
